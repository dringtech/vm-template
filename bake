PACKER=/usr/local/bin/packer

function build {
  local os version
  os=$1
  variant=$2
  [ -z $os ] && echo Please provide an os name && exit 1
  [ -z $variant ] && echo Please provide an os variant && exit 1
  ${PACKER} build -var-file=${variant}.json ${os}.json
}

function load {
  local os version
  os=$1
  version=$2
  vagrant box add ./packer_${os}_${version}_vbox_virtualbox.box --name dringtech/${os}-${version} --force
}

case $1 in
  build)
    build $2 $3
    ;;
  load)
    load $2 $3
    ;;
  *)
    ;;
esac
